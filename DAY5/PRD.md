📑 PRD：視覺辨識軟體（最終版）
1. 背景與目標

開發一套基於 Python + OpenCV + CustomTkinter 的 GUI 軟體，支援 即時串流辨識 (Webcam 模式) 與 靜態圖片辨識 (Image 模式)。
主要應用場景為電子電路板檢測，需自動偵測並標註 PCB 四角孔洞位置，計算四邊邊長，並提供單位轉換與結果保存。

2. 系統架構與技術棧

語言：Python 3.10+

GUI 框架：CustomTkinter

影像處理：OpenCV

數學計算：NumPy

可視化（Debug 用）：Matplotlib

3. 功能需求表格
模組/功能	描述	輸出	優先級
模式切換	Webcam 模式與靜態圖片模式切換	使用者按鈕操作	高
Webcam 串流顯示	開啟攝影機後顯示即時影像	畫面區域顯示串流	高
多攝影機支援	下拉選單選擇單一攝影機 (USB0, USB1...)，不支援同時顯示多串流	即時影像	中
靜態圖片載入	選擇並顯示圖片	畫面區域顯示圖片	高
顯示計算結果 (Checkbox)	勾選後進行 OpenCV 流程，繪製四角孔洞與邊框	疊加影像顯示 + 邊長數據	高
單位選擇	提供下拉式選單：pixel、mm、inch	計算結果依單位顯示	高
邊長計算	計算四邊長度 AB, BC, CD, DA	數值顯示（疊加在影像 + 右側文字區塊）	高
單位精度	顯示結果保留小數點後兩位	例如：12.34 mm	高
結果保存	一鍵保存結果：
1. 帶標註的結果影像 (JPG)
2. 邊長數據文字檔 (CSV/TXT)	result_xxx.jpg, result_xxx.csv	中
4. 功能流程
4.1 Webcam 模式

使用者按下 開啟 Webcam → 顯示即時串流。

若勾選 顯示計算結果：

OpenCV 流程：灰階 → 高斯模糊 → 邊緣檢測 → 霍夫圓檢測。

鎖定四個角落孔洞 → 繪製圓與邊框。

計算四邊長，依單位換算（保留兩位小數）。

結果顯示：

疊加於影像上（線條 + 數字）。

右側文字區塊（AB=xx.xx mm 等）。

若取消勾選 → 顯示原始串流。

使用者可選擇 保存結果 → 產生 JPG + CSV。

4.2 靜態圖片模式

使用者選擇圖片 → 顯示於畫面。

若勾選 顯示計算結果 → 與 Webcam 流程相同。

若取消勾選 → 顯示原始圖片。

使用者可選擇 保存結果 → 產生 JPG + CSV。

5. 非功能需求

效能：Webcam 模式需達到 ≥15 FPS。

穩定性：未找到完整四個孔洞 → 顯示提示「未檢測到完整四角」。

擴展性：後續可新增「自動校正比例」功能（例如：標定物換算像素比）。

6. 優先順序（MVP → 擴充）

基礎 GUI 架構（CustomTkinter，含模式切換）。

Webcam 串流 + 靜態圖片載入。

勾選顯示計算結果 → OpenCV 檢測。

邊長計算 + 單位轉換（小數點後兩位）。

邊長顯示（影像疊加 + 文字區塊）。

保存結果影像與數據檔案。

多攝影機切換支援。